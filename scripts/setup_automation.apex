// Smart Campaign Grouping - Automation Setup Script

System.debug('ğŸ¤– Setting up Smart Campaign Grouping Automation...');

// 1. Schedule the hourly monitoring
try {
    String hourlyResult = CampaignGroupingMonitor.scheduleHourly();
    System.debug('âœ… Hourly Schedule: ' + hourlyResult);
} catch (Exception e) {
    System.debug('âš ï¸ Hourly scheduling: ' + e.getMessage());
}

// 2. Schedule the daily monitoring  
try {
    String dailyResult = CampaignGroupingMonitor.scheduleDaily();
    System.debug('âœ… Daily Schedule: ' + dailyResult);
} catch (Exception e) {
    System.debug('âš ï¸ Daily scheduling: ' + e.getMessage());
}

// 3. Run an initial analysis to create sample suggestions
System.debug('ğŸ” Running initial campaign analysis...');
try {
    CampaignIntelligence.autoGroupCampaigns();
    System.debug('âœ… Initial analysis complete');
} catch (Exception e) {
    System.debug('âš ï¸ Initial analysis failed: ' + e.getMessage());
    // Fallback to simple version
    try {
        CampaignIntelligenceSimple.autoGroupCampaigns();
        System.debug('âœ… Simple analysis complete');
    } catch (Exception e2) {
        System.debug('âŒ All analysis failed: ' + e2.getMessage());
    }
}

// 4. Check for existing suggestions
try {
    List<Campaign_Grouping_Suggestion__c> suggestions = [
        SELECT Id, Suggested_Initiative_Name__c, Confidence_Score__c, Status__c
        FROM Campaign_Grouping_Suggestion__c
        WHERE Status__c = 'Pending Review'
        ORDER BY Confidence_Score__c DESC
        LIMIT 5
    ];
    
    System.debug('ğŸ“Š Found ' + suggestions.size() + ' pending suggestions:');
    for (Campaign_Grouping_Suggestion__c suggestion : suggestions) {
        System.debug('   â€¢ ' + suggestion.Suggested_Initiative_Name__c + ' (' + 
                    (suggestion.Confidence_Score__c * 100).intValue() + '% confidence)');
    }
} catch (Exception e) {
    System.debug('âš ï¸ Could not retrieve suggestions: ' + e.getMessage());
}

System.debug('ğŸ‰ Smart Campaign Grouping Setup Complete!');
System.debug('');
System.debug('ğŸ“‹ What\'s Now Available:');
System.debug('   âœ… Automated hourly campaign pattern detection');
System.debug('   âœ… Daily monitoring and cleanup');
System.debug('   âœ… Machine learning from user feedback');
System.debug('   âœ… One-click approval interface');
System.debug('   âœ… Email notifications for high-confidence matches');
System.debug('   âœ… Auto-approval for 95%+ confidence suggestions');
System.debug('');
System.debug('ğŸ”§ How to Access:');
System.debug('   â€¢ Campaign Records: Click "ğŸ¤– Smart Campaign Analysis" button');
System.debug('   â€¢ Lightning Component: Add to Home/App pages');
System.debug('   â€¢ Developer Console: CampaignIntelligenceSimple.autoGroupCampaigns();');
System.debug('   â€¢ Custom Objects: Campaign Grouping Suggestions tab');
System.debug('');
System.debug('ğŸ“ˆ Success Metrics to Track:');
System.debug('   â€¢ Grouping Accuracy: Target 95%+');
System.debug('   â€¢ Time to Group: <24 hours');
System.debug('   â€¢ User Effort: 1 click per suggestion');
System.debug('   â€¢ Coverage: 100% of campaigns reviewed');